<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8">
    <title>Tevzi İş Atama Paneli</title>
    <link rel="icon" type="image/png" href="favicon.png">
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/style.css">
</head>

<body>
    <button class="menu-toggle d-md-none" onclick="toggleMenu()">☰</button>


    <div class="d-flex">

        <!-- SIDEBAR -->
        <div class="sidebar">
            <div class="sidebar-logo">
                <div class="fw-bold fs-5">VATAN NFC</div>
                <img src="assets/logo.png" alt="Logo">
            </div>

            <a href="tevzi.html" class="active">İş Atama</a>
            <a href="timeline.html">Zaman Çizelgesi</a>
            <a href="nfc-logs.html">NFC Logları</a>
            <a href="personnel.html">Personel Yönetimi</a>
            <a href="card-management.html">Kart Yönetimi</a>


            <div class="sidebar-title">Yönetim</div>
            <a href="settings.html">Ayarlar</a>
        </div>

        <!-- MAIN CONTENT -->
        <div class="content flex-grow-1 p-4">

            <div class="d-flex justify-content-between mb-2">
                <h3 class="fw-bold">Tevzi İş Atama</h3>
                <div id="liveClock" class="text-end text-muted small"></div>
            </div>

            <div class="row">

                <!-- SOL BLOK (Kart Okutan Personeller) -->
                <div class="col-md-4">

                    <div class="card mb-4">
                        <div class="card-header fw-bold">Kart Okutan Personeller</div>

                        <div class="p-3">

                            <!-- Filtre Alanları -->
                            <input id="filterName" class="form-control mb-2" placeholder="Ada göre filtrele">
                            <input id="filterDept" class="form-control mb-2" placeholder="Departmana göre filtrele">

                            <div class="d-flex gap-2 mb-2">
                                <button class="btn btn-sm btn-outline-primary w-50" onclick="selectAllFiltered()">Tümünü
                                    Seç</button>
                                <button class="btn btn-sm btn-outline-secondary w-50"
                                    onclick="clearAllSelected()">Temizle</button>
                            </div>
                        </div>

                        <!-- TABLO -->
                        <div class="card-body" style="max-height: 600px; overflow-y: auto; padding:0">

                            <table class="table table-sm mb-0">
                                <thead class="table-light">
                                    <tr>
                                        <th width="30"><input type="checkbox" onclick="toggleSelectAll(this)"></th>
                                        <th>Ad Soyad</th>
                                        <th>Departman</th>
                                        <th>Giriş</th>
                                    </tr>
                                </thead>
                                <tbody id="scanTableBody"></tbody>
                            </table>

                        </div>
                    </div>

                </div>

                <!-- SAĞ BLOK (İş Atama Bölümü) -->
                <div class="col-md-8">

                    <!-- FORM -->
                    <div class="card mb-4">
                        <div class="card-header fw-bold">Tevzi İş Atama</div>

                        <div class="card-body row g-3">

                            <div class="col-md-6">
                                <label class="form-label">Proje / İstasyon</label>
                                <select id="stationSelect" class="form-select"></select>
                            </div>

                            <div class="col-md-3">
                                <label class="form-label">Başlangıç</label>
                                <input id="startTime" type="time" class="form-control">
                            </div>

                            <div class="col-md-3">
                                <label class="form-label">Bitiş</label>
                                <input id="endTime" type="time" class="form-control">
                            </div>

                            <div class="col-md-12 d-grid">
                                <button class="btn btn-primary" onclick="assignJob()">İş Ata</button>
                            </div>

                        </div>
                    </div>

                    <!-- TABLO (Bugünkü İş Atamaları) -->
                    <div class="card">
                        <div class="card-header fw-bold d-flex justify-content-between align-items-center">
                            <span>Bugünkü İş Atamaları</span>

                            <button class="btn btn-sm btn-outline-success" onclick="exportAssignmentsCsv()">
                                CSV İndir
                            </button>
                        </div>

                        <div class="card-body p-0">
                            <table class="table table-striped m-0">
                                <thead>
                                    <tr>
                                        <th>Personel</th>
                                        <th>Görev</th>
                                        <th>Başlangıç</th>
                                        <th>Bitiş</th>
                                        <th></th>
                                    </tr>
                                </thead>
                                <tbody id="assignmentTable"></tbody>
                            </table>
                        </div>
                    </div>

                </div>

            </div>

        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

    <script src="js/api.js"></script>
    <script src="js/app.js"></script>
    <script src="js/tevzi.js"></script>

</body>

</html>